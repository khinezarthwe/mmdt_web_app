{% extends "base.html" %}
{% load static %}
{% block content %}
<h3>Latest Poll Questions</h3>
{% if messages %}
 <ul class="messages">
   {% for message in messages %}
     <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
   {% endfor %}
 </ul>
{% endif %}

{% if latest_question_list %}
<form action="{% url 'polls:vote' %}" method="post">
 {% csrf_token %}
 {% for question in latest_question_list %}
   <div>
     <h4>{{ question.question_text }}</h4>

     {% if user_has_voted %}
       {% for choice in question.choice_set.all %}
         <label>{{ choice.choice_text }}: {{ choice.votes }} vote{{ choice.votes|pluralize }}</label><br>
       {% endfor %}
     {% else %}
       {% for choice in question.choice_set.all %}
         <input type="radio" name="question_{{ question.id }}" id="choice{{ choice.id }}" value="{{ choice.id }}">
         <label for="choice{{ choice.id }}">{{ choice.choice_text }}</label><br>
       {% endfor %}
     {% endif %}
   </div>
 {% endfor %}

 {% if not user_has_voted %}
   <input type="submit" value="Vote">
 {% endif %}
</form>
{% else %}
 <p>No polls are available.</p>
{% endif %}
{% endblock %}
