{% extends "base.html" %}
{% load static  %}
{% block content %}
<style>
</style>
<div class="container mt-4">
    <div class="row">
        <!-- Blog List Column -->
        <div class="col-md-8">
            {% for post in post_list %}
            <div class="card shadow-lg mt-4 pl-lg-2 pl-md-0 bg-dark-400">
                <div class="row card-row">
                    <div class="col-lg-4 col-md-12" id="img-column">
                        <div class="img-over-lay">
                            <!-- Image is added from JQuery -->
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-12">
                        <div class="card-body">
                            <div class="card-title h3">
                                {{ post.title }}
                            </div>
                            <div class="card-text mb-3">
                                <small class="text-muted">{{ post.author }} | {{ post.created_on}}</small>
                            </div>
                            <div class="card-text  justify-content-evenly">
                                {{post.content|slice:":200" }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 offset-lg-8 col-md-1 offset-md-8 col-sm-1 offset-sm-8">
                    <a href="{% url 'post_detail' post.slug  %}" class="btn btn-sm btn-warning font-weight-bold mb-3">
                        Read More
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        <!-- Side Bar-->
        {% block sidebar %}
        {% include 'sidebar.html' %}
        {% endblock sidebar %}
    </div>
    <!-- Page Navigation -->
    <div class="row my-4">
        {% if post_list.has_other_pages %}
        <div aria-label="Page navigation container" class="col-lg-1 offset-lg-3 col-sm-1 offset-sm-3">
            <ul class="pagination m-auto">
                {% if post_list.has_previous %}
                <li class="page-item mx-2">
                    <a href="?page={{ post_list.previous_page_number }}" class="page-link" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                {% endif %} {% if post_list.has_next %}
                <li class="page-item mx-2">
                    <a class="page-link" href="?page={{ post_list.next_page_number }}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
                {% endif %}
                {% endif %}
            </ul>
        </div>
    </div>
</div>

<!-- Include jQuery -->
<script src="{% static 'blog/js/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'blog/js/popper.min.js' %}"></script>
<script src="{% static 'blog/js/bootstrap.min.js' %}"></script>
<script>
    $(document).ready(function () {
        // Get the height of the navbar
        var navBarHeight = $('.navbar').outerHeight();

        // Get the height of the navbar
        $('.container').css('padding-top', navBarHeight + 'px');

        // Loop through each card
        $('.card-row').each(function () {
            var $this = $(this);
            var $imgCol = $this.find('#img-column');

            // Create an image and apply margins
            var $image = $('<img>', {
                src: "{% static 'blog/images/purple.jpg' %}",
                alt: 'blog image',
                class: 'w-100 h-100 mt-lg-4 m-sm-0 p-sm-0 '
            });
            // Append image
            $imgCol.append($image);
        });

    });

</script>

{%endblock%}